create table users(
usersid int identity(1,1),
usersname varchar(20),
Uemail varchar(20),
Upassword varchar(20),
Ucity varchar(10),
phoneno varchar(20),
UsersType int
) ----------------------

--create table seller(
--sellerid int identity(21,1),
--Sname varchar(20),
--Sphone varchar(20),
--Scity varchar(20),
--Smail varchar(20),
--Spass varchar(20)
--)------------------------

create table category(
categoryid int identity(51,1),
categoryName varchar(20),
)-------------------
insert into category (categoryName) values('Home')

create table products(
productid int identity(101,1),
productName varchar(20),
supplierid int,
categoryid int,
stock int,
price decimal
)---------------------
insert into products values('curtains',2,53,50,1000)
select * from 
create table paymentType(
paymentTypeid int identity(301,1),
PaytypeName varchar(10)
)---------
insert into paymentType values('card')
select * from products

create table cart(
orderId int identity(201,1),
Userid int,
orderNo varchar(50),
paymenttypeid int,
orderdate date
)
insert into cart values(2,'8546',301,getdate())

select * from cart
create table orderdetails(
orderdetailsId int identity(501,1),
Orderid int,
productid int,
orderno varchar(50),
price decimal,
quantity int,
totalbill decimal
)insert into orderdetails values(202,102,'8546',500,2,8)
select * from orderdetails
select * from cart

alter trigger totalbill_
on orderdetails 
after insert 
as
begin
update orderdetails set
 totalbill=(orderdetails.price*orderdetails.quantity) from inserted where
 orderdetails.orderdetailsId in (select orderdetailsId from inserted) 


end

drop TRIGGER UpdateTotalBillOnInsert
ON orderdetails
AFTER INSERT
AS
BEGIN
    UPDATE od
    SET od.totalbill = i.quantity * i.price
    FROM orderdetails od
    INNER JOIN inserted i ON od.orderdetailsId = i.orderdetailsId;
END;


select * from products
select * from cart
select * from orderdetails
